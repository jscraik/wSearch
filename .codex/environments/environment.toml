# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "wsearch local environment"

[setup]
script = '''
set -euo pipefail

echo "[codex] setup: /Users/jamiecraik/dev/wsearch"
bootstrap_node_tools() {
  export PATH="/opt/homebrew/bin:/usr/local/bin:$HOME/.local/share/mise/shims:$HOME/.local/bin:$PATH"

  if ! command -v node >/dev/null 2>&1; then
    if command -v mise >/dev/null 2>&1; then
      eval "$(mise activate bash)" >/dev/null 2>&1 || true
    fi
  fi
}

run_node_pm() {
  bootstrap_node_tools
  npm "$@"
}

run_node_pm ci || run_node_pm install
'''

[[actions]]
name = "Install deps"
icon = "tool"
command = '''
set -euo pipefail

bootstrap_node_tools() {
  export PATH="/opt/homebrew/bin:/usr/local/bin:$HOME/.local/share/mise/shims:$HOME/.local/bin:$PATH"

  if ! command -v node >/dev/null 2>&1; then
    if command -v mise >/dev/null 2>&1; then
      eval "$(mise activate bash)" >/dev/null 2>&1 || true
    fi
  fi
}

run_node_pm() {
  bootstrap_node_tools
  npm "$@"
}

run_node_pm ci || run_node_pm install
'''

[[actions]]
name = "Build"
icon = "tool"
command = '''
set -euo pipefail

bootstrap_node_tools() {
  export PATH="/opt/homebrew/bin:/usr/local/bin:$HOME/.local/share/mise/shims:$HOME/.local/bin:$PATH"

  if ! command -v node >/dev/null 2>&1; then
    if command -v mise >/dev/null 2>&1; then
      eval "$(mise activate bash)" >/dev/null 2>&1 || true
    fi
  fi
}

run_node_pm() {
  bootstrap_node_tools
  npm "$@"
}

run_node_pm run build
'''

[[actions]]
name = "Run tests"
icon = "test"
command = '''
set -euo pipefail

bootstrap_node_tools() {
  export PATH="/opt/homebrew/bin:/usr/local/bin:$HOME/.local/share/mise/shims:$HOME/.local/bin:$PATH"

  if ! command -v node >/dev/null 2>&1; then
    if command -v mise >/dev/null 2>&1; then
      eval "$(mise activate bash)" >/dev/null 2>&1 || true
    fi
  fi
}

run_node_pm() {
  bootstrap_node_tools
  npm "$@"
}

run_node_pm test
'''

[[actions]]
name = "Run app"
icon = "run"
command = '''
set -euo pipefail

bootstrap_node_tools() {
  export PATH="/opt/homebrew/bin:/usr/local/bin:$HOME/.local/share/mise/shims:$HOME/.local/bin:$PATH"

  if ! command -v node >/dev/null 2>&1; then
    if command -v mise >/dev/null 2>&1; then
      eval "$(mise activate bash)" >/dev/null 2>&1 || true
    fi
  fi
}

run_node_pm() {
  bootstrap_node_tools
  npm "$@"
}

run_node_pm run dev
'''
